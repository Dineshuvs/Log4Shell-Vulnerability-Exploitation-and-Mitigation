#!/bin/bash

# Update the Log4j version in the pom.xml file
# Update the log4j-core version in the pom.xml file


# Set the old and new Log4j versions
OLD_LOG4J_VERSION=2.14.1
NEW_LOG4J_VERSION=2.17.0

# Replace the old version with the new version in the pom.xml file
sed -i "s/${OLD_LOG4J_VERSION}/${NEW_LOG4J_VERSION}/g" "$pom.xml"
	
# Build the application using Maven
mvn clean package

# Move the resulting .war file to the target directory
mv target/*.war /home/dinesh/Downloads/log4j-shell-poc-main/target/*.war

# Print a success message
echo "Updated Log4j version to ${LOG4J_VERSION} and built log4shell-1.0-SNAPSHOT.war"
cd ..
docker build -t log4j-shell-updated
