#!/bin/bash

# Specify the path to the file
file_path="./vulnerable-application/pom.xml"

# Define the search and replace strings
search_string="<version>2.14.1</version>"
replace_string="<version>2.17.0</version>"

# Use sed to perform the replacement
sed -i "s|$search_string|$replace_string|g" "$file_path"

echo "Replacement complete."
cd ./vulnerable-application
mvn clean package
chmod 777 ./target/*.war
cd ..
# Move the resulting .war file to the target directory
mv ./vulnerable-application/target/*.war ./target/*.war

docker build -t log4-shell-mitigation1 .
echo "Mitigation 1 image build successfully"



